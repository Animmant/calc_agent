# Calculator Agent

A natural language processing agent that understands and processes calculation-related queries using Google's Gemini Pro model.

## Features

- **Natural Language Understanding (NLU)** for mathematical queries
- **Intent and Entity Extraction** from user input
- **PDF Report Generation** with Typst for debug reports and math notebooks
- **Interactive Chat Interface** with clear result presentation
- **User Interaction:** Conducts clarifying dialogues when information is missing or ambiguous
- **Parameter Binding:** Automatic extraction of necessary information from user queries
- **Agent Orchestration Potential:** Design that allows linking multiple specialized agents

## New: PDF Generation üìÑ

Calculator Agent now supports generating professional PDF documents:

### Available PDF Types:
- **Debug Reports** (`/debug`): Detailed analysis of agent reasoning and tool usage
- **Math Notebooks** (`/maths`): Beautiful mathematical solutions in notebook style

### Quick PDF Commands:
```
üë§ –í–∏: –°—Ç–≤–æ—Ä–∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π –∑–æ—à–∏—Ç –¥–ª—è –∑–∞–¥–∞—á—ñ –ø—Ä–æ –ø–ª–æ—â—É –∫—Ä—É–≥–∞
üë§ –í–∏: –ó–≥–µ–Ω–µ—Ä—É–π –∑–≤—ñ—Ç –¥–µ–±–∞–≥—É –¥–ª—è –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è
```

See [PDF_GENERATION.md](docs/PDF_GENERATION.md) for detailed documentation.

## Getting Started

See [SETUP.md](SETUP.md) for detailed setup instructions.

### Quick Start

1. Install dependencies: `pip install -r requirements.txt`
2. Install Typst for PDF generation: `winget install --id Typst.Typst` (Windows)
3. Set your Google API key as an environment variable
4. Run the application: `python main.py`

### Test PDF Generation
```bash
python test_pdf_generation.py
```

## Project Structure

```
src/
‚îú‚îÄ‚îÄ agent/              # Core agent functionality
‚îÇ   ‚îú‚îÄ‚îÄ tools/         # Agent tools (calculator, PDF generation)
‚îÇ   ‚îî‚îÄ‚îÄ main.py        # Agent entry point
‚îú‚îÄ‚îÄ reporting/         # PDF generation system
‚îÇ   ‚îî‚îÄ‚îÄ pdf_generator.py
‚îú‚îÄ‚îÄ cli/               # Command-line interface
‚îî‚îÄ‚îÄ config/            # Configuration management

templates/
‚îî‚îÄ‚îÄ typst/             # PDF templates
    ‚îú‚îÄ‚îÄ debug_report.typ
    ‚îî‚îÄ‚îÄ math_notebook.typ

output_pdfs/           # Generated PDF files
docs/                  # Documentation
tests/                 # Unit tests
```

## Requirements

- Python 3.8+
- Google API key for Gemini Pro
- Typst (for PDF generation)
- Dependencies listed in requirements.txt

## Command System

The agent supports special commands for different output formats:

### `/result`
Displays the main result of the last active tool. If the result is Python code generated by `MathModelSolver`, displays that code. Otherwise shows execution result.

### `/debug` 
Generates detailed debug report including:
- Original user query
- LLM reasoning chain (if available through Langchain)
- Selected tool name and input parameters  
- Intermediate results, formulas, key logic used by the tool
- Final tool result or error message
- Used resources (e.g., LLM model name, library versions)

### `/maths`
Generates PDF in "mathematical notebook" style:
- Clear problem/task formulation
- Step-by-step solution description (possibly LLM-generated and code-verified)
- Results presented in understandable format

## Examples

### Basic Calculation
```
üë§ –í–∏: –°–∫—ñ–ª—å–∫–∏ –±—É–¥–µ 2 + 2 * 3?
ü§ñ –ê–≥–µ–Ω—Ç: –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –≤–∏—Ä–∞–∑—É 2 + 2 * 3 –¥–æ—Ä—ñ–≤–Ω—é—î 8.
```

### PDF Generation
```
üë§ –í–∏: –†–æ–∑–≤'—è–∂–∏ —Ä—ñ–≤–Ω—è–Ω–Ω—è x¬≤ - 5x + 6 = 0 —ñ —Å—Ç–≤–æ—Ä–∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π –∑–æ—à–∏—Ç
ü§ñ –ê–≥–µ–Ω—Ç: [—Ä–æ–∑–≤'—è–∑—É—î —Ä—ñ–≤–Ω—è–Ω–Ω—è —Ç–∞ —Å—Ç–≤–æ—Ä—é—î PDF]
‚úÖ PDF –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–æ—à–∏—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–æ: output_pdfs/math_notebook_abc123.pdf
```

## Documentation

- [Setup Instructions](SETUP.md)
- [PDF Generation Guide](docs/PDF_GENERATION.md)
- [Calculator Documentation](README_CALCULATOR.md)